## Customization

Splunks security content can be customised. First, the search itself can be customised with multiple macrose. Second, the scheduling and alert action can configured according to your standard.

### Macros

Release 1.0.46 introduced input(pre-filter) and output(post-filter) macros for each of our detection searches. These macros let you update a macro definition once and then apply the new definition across all detections that leverage that macro. These changes will be local to your Splunk environment.

input(pre-filter): This macro specifies your environment-specific configurations (index, source, sourcetype, etc.) to get the specific data sources that you require. Replace the macro definition with configurations for your Splunk environment.

output(post-filter): This macro specifies your environment-specific values (dest, user, etc,), to filter out known false positives. Replace the macro definition with values that you'd like to exclude from detection results. Think of this as whitelisting/blacklisting using macros.


### Scheduling and Alert Actions

Security Content decouples the detection from deployment configuration: 
`````
name: Enterprise Security deployment configuration
id: bc91a8cd-35e7-4bb2-6140-e756cc46f212
date: '2020-04-27'
description: This configuration file applies to all correlation searches that are used for detections
author: Bhavin Patel
scheduling:
  cron_schedule: '*/30 * * * *'
  earliest_time: -30m
  latest_time: now
  schedule_window: auto
alert_action:
  notable:
    rule_description: '%description%'
    rule_title: '%name%'
    nes_fields:
      - user
      - dest
      - src
tags:
  analytic_story: all
`````

During our content generation using ````bin/generate.py````, detections and deployment configuration are linked together based on the tags. An example is a detection with analytic_story: Credential Dumping and a deployment configuration with analytic_story: Credential Dumping. A special case is analytic_story: all, which will match to all detections. Multiple deployment configuration can be created if you want to apply different scheduling for different types of detections.

In order to customise the detections with own deployment configurations, the following steps needs to be followed:
- Clone the security-content GitHub repository
- Make the changed to the deployment configuration(s)
- Create virtualenv and install requirements:
`````
pip install virtualenv && virtualenv -p python3 venv && source venv/bin/activate && pip install -r requirements.txt
`````
- Run generate.py:
`````
python bin/generate.py --path . --output package -v
`````

Your customised version of Security Content Splunk App can be found in the packages folder.